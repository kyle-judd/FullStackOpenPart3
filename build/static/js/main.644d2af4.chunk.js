(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){"use strict";t.r(n);var c=t(2),o=t(15),r=t.n(o),u=t(5),a=t(4),i=t(3),s=t.n(i),l="/api/persons",d={getAll:function(){return s.a.get(l).then((function(e){return e.data}))},createPerson:function(e){return s.a.post(l,e).then((function(e){return e.data}))},updatePerson:function(e,n){return s.a.put("".concat(l,"/").concat(e),n).then((function(e){return console.log(e),e.data}))},deletePerson:function(e){return s.a.delete("".concat(l,"/").concat(e)).then((function(e){return console.log(e),e.data}))}},b=t(0),h=function(e){var n=e.submitHandler,t=e.handleNameChange,c=e.handlePhoneNumberChange;return Object(b.jsxs)("form",{onSubmit:n,children:[Object(b.jsxs)("div",{children:["name: ",Object(b.jsx)("input",{onChange:t})]}),Object(b.jsxs)("div",{children:["number: ",Object(b.jsx)("input",{onChange:c})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})},j=function(e){var n=e.onQueryChangeHandler;return Object(b.jsxs)("div",{children:["filter shown with: ",Object(b.jsx)("input",{onChange:n})]})},f=function(e){var n=e.persons,t=e.query,c=e.click;return Object(b.jsx)("div",{children:n.map((function(e){return e.name.toLowerCase().includes(t.toLowerCase())||""===t?Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{children:[e.name," ",e.number]}),Object(b.jsx)("button",{onClick:function(){return c(e)},children:"delete"})]},e.id):null}))})},O=function(e){var n=e.message;return null===n.type?null:Object(b.jsx)("div",{style:"success"===n.type?{width:200,height:50,backgroundColor:"green",color:"black",border:"1px solid black"}:{width:200,height:50,backgroundColor:"red",color:"black",border:"1px solid black"},children:n.content})},m=function(){var e=Object(c.useState)([]),n=Object(a.a)(e,2),t=n[0],o=n[1],r=Object(c.useState)({}),i=Object(a.a)(r,2),s=i[0],l=i[1],m=Object(c.useState)(""),p=Object(a.a)(m,2),g=p[0],x=p[1],v=Object(c.useState)({type:null,content:null}),y=Object(a.a)(v,2),k=y[0],w=y[1];Object(c.useEffect)((function(){return d.getAll().then((function(e){return o(e)}))}),[]);return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(O,{message:k}),Object(b.jsx)(j,{onQueryChangeHandler:function(e){x(e.target.value)}}),Object(b.jsx)("h1",{children:"add a new"}),Object(b.jsx)(h,{submitHandler:function(e){e.preventDefault(),t.some((function(e){e.name===s.name&&function(e){window.confirm("".concat(e.name," is already added to the phonebook. This will update their number. Are you sure?"))&&d.updatePerson(e.id,s).then((function(n){var c=t.map((function(t){return t.id!==e.id?t:n}));console.log(c),o(c)}))}(e)}))||d.createPerson(s).then((function(e){o(t.concat(e)),w({type:"success",content:"Successfully added ".concat(e.name)}),setTimeout((function(){w({type:null,content:null})}),3e3),l({})}))},handleNameChange:function(e){var n=Object(u.a)(Object(u.a)({},s),{},{name:e.target.value});console.log(n),l(n)},handlePhoneNumberChange:function(e){var n=Object(u.a)(Object(u.a)({},s),{},{number:e.target.value});console.log(n),l(n)}}),Object(b.jsx)("h2",{children:"Numbers"}),Object(b.jsx)(f,{persons:t,query:g,click:function(e){window.confirm("Are you sure you want to delete ".concat(e.name,"?"))&&(d.deletePerson(e.id).catch((function(e){return w({type:"error",content:e})})),o(t.filter((function(n){return n.id!==e.id}))))}})]})};r.a.render(Object(b.jsx)(m,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.644d2af4.chunk.js.map