(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t(15),o=t.n(c),a=t(5),u=t(4),i=t(3),s=t.n(i),d="/api/persons",l={getAll:function(){return s.a.get(d).then((function(e){return e.data}))},createPerson:function(e){return s.a.post(d,e).then((function(e){return e.data}))},updatePerson:function(e,n){return s.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},deletePerson:function(e){return s.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))}},b=t(0),h=function(e){var n=e.submitHandler,t=e.handleNameChange,r=e.handlePhoneNumberChange;return Object(b.jsxs)("form",{onSubmit:n,children:[Object(b.jsxs)("div",{children:["name: ",Object(b.jsx)("input",{onChange:t})]}),Object(b.jsxs)("div",{children:["number: ",Object(b.jsx)("input",{onChange:r})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})},j=function(e){var n=e.onQueryChangeHandler;return Object(b.jsxs)("div",{children:["filter shown with: ",Object(b.jsx)("input",{onChange:n})]})},f=function(e){var n=e.person,t=e.eventHandler;return Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{children:Object(b.jsx)("strong",{children:n.name})}),Object(b.jsx)("p",{children:n.number}),Object(b.jsx)("button",{onClick:function(){return t(n)},children:"Delete Entry"})]})},O=function(e){var n=e.persons,t=e.query,r=e.click,c=n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));return Object(b.jsx)("div",{children:c.map((function(e){return Object(b.jsx)(f,{person:e,eventHandler:r},e.id)}))})},p=function(e){var n=e.message;return null===n.type?null:Object(b.jsx)("div",{style:"success"===n.type?{width:200,height:50,backgroundColor:"green",color:"black",border:"1px solid black"}:{width:200,height:50,backgroundColor:"red",color:"black",border:"1px solid black"},children:n.content})},m=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],o=Object(r.useState)({}),i=Object(u.a)(o,2),s=i[0],d=i[1],f=Object(r.useState)(""),m=Object(u.a)(f,2),x=m[0],g=m[1],v=Object(r.useState)({type:null,content:null}),y=Object(u.a)(v,2),k=y[0],w=y[1],C=function(){return l.getAll().then((function(e){return c(e)}))};Object(r.useEffect)((function(){C()}),[]);return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(p,{message:k}),Object(b.jsx)(j,{onQueryChangeHandler:function(e){g(e.target.value)}}),Object(b.jsx)("h1",{children:"add a new"}),Object(b.jsx)(h,{submitHandler:function(e){e.preventDefault();var n,r=t.find((function(e){return e.name===s.name}));r?(n=r,window.confirm("".concat(n.name," is already added to the phonebook. This will update their number. Are you sure?"))&&l.updatePerson(n.id,s).then(C).catch((function(e){return w({type:"error",content:e})}))):l.createPerson(s).then((function(){C(),w({type:"success",content:"Successfully added ".concat(s.name)}),setTimeout((function(){w({type:null,content:null})}),3e3),d({})})).catch((function(e){return w({type:"error",content:"Invalid length"})}))},handleNameChange:function(e){var n=Object(a.a)(Object(a.a)({},s),{},{name:e.target.value});d(n)},handlePhoneNumberChange:function(e){var n=Object(a.a)(Object(a.a)({},s),{},{number:e.target.value});d(n)}}),Object(b.jsx)("h2",{children:"Numbers"}),Object(b.jsx)(O,{persons:t,query:x,click:function(e){window.confirm("Are you sure you want to delete ".concat(e.name,"?"))&&l.deletePerson(e.id).then(C).catch((function(e){return w({type:"error",content:e})}))}})]})};o.a.render(Object(b.jsx)(m,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.ee42974f.chunk.js.map